{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"21.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Login } from './login';\n\n@NgModule({\n  declarations: [\n    Login,\n  ],\n  imports: [\n    IonicPageModule.forChild(Login),\n  ],\n  exports: [\n    Login\n  ]\n})\nexport class LoginModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { UserService } from '../../service/user.service';\nimport { Headers, Http } from '@angular/http';\n\n/**\n * Generated class for the Login page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\ndeclare var QQSDK: any;\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class Login {\n\n  name: '';\n  pass: '';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public UserService: UserService, public http: Http) {\n\n  }\n\n  login(){\n\n    if(!this.name || !this.pass){\n      return true;\n    }\n\n    let url = \"http://www.devonhello.com/chihu/login\";\n\n    var headers = new Headers();\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\n\n    this.http.post(url, \"name=\"+this.name + \"&pass=\"+this.pass, {\n      headers: headers\n    })\n      .subscribe((res) => {\n        alert(JSON.stringify(res.json()));\n        if(res.json()[0]['_id']){\n          this.UserService.setUser( res.json()[0] );\n        }\n      });\n  }\n\n  //注册\n  regist(){\n    this.navCtrl.push( 'Regist' );\n  }\n\n  QQinit() {\n    var args = { client: '' },\n      _that = this;\n    args.client = QQSDK.ClientType.QQ;//QQSDK.ClientType.QQ,QQSDK.ClientType.TIM;\n    QQSDK.checkClientInstalled(function () {\n      _that.QQlogin();\n    }, function () {\n      // if installed QQ Client version is not supported sso,also will get this error\n      alert('client is not installed');\n    }, args);\n  }\n\n  QQlogin() {\n    var args = { client: '' },\n        _that = this;\n    args.client = QQSDK.ClientType.QQ;//QQSDK.ClientType.QQ,QQSDK.ClientType.TIM;\n    QQSDK.ssoLogin(function (result) {\n      alert('token is ' + result.access_token);\n      alert('userid is ' + result.userid);\n      alert('expires_time is ' + new Date(parseInt(result.expires_time)) + ' TimeStamp is ' + result.expires_time);\n      _that.getQQuser(result.access_token, result.userid);\n  }, function (failReason) {\n      alert(failReason);\n    }, args);\n  }\n\n  //获取qq用户信息\n  getQQuser(accessToken, userId) {\n    var _that = this;\n    var url = 'https://graph.qq.com/user/get_user_info?access_token=' + accessToken + '&oauth_consumer_key=' + '1105594635' + '&openid=' + userId;\n\n    this.http.get(url)\n      .subscribe((res) => {\n        alert(JSON.stringify(res.json()));\n        var sex = res.json()['gender'] == \"男\" ? 0 : 1;\n        //_that.UserService.setUser( res.json()['nickname'], accessToken, res.json()['figureurl_2'], sex );\n      });\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad Login');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}
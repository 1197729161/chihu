{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":"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","file":"34.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Chat } from './chat';\n\n@NgModule({\n  declarations: [\n    Chat,\n  ],\n  imports: [\n    IonicPageModule.forChild(Chat),\n  ],\n  exports: [\n    Chat\n  ]\n})\nexport class ChatModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { Component, ViewChild, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Events, Content, TextInput } from 'ionic-angular';\nimport { JPushService } from '../../service/jPush.service';\nimport { UserService } from '../../service/user.service';\n\ndeclare var window;\n@IonicPage()\n@Component({\n    selector: 'page-chat',\n    templateUrl: 'chat.html',\n})\nexport class Chat {\n\n    @ViewChild(Content) content: Content;\n    @ViewChild('chat_input') messageInput: TextInput;\n\n    //聊天数据列表\n    msgList = [];\n    //输入文本信息\n    editorMsg = '';\n    //目标用户吗\n    toUserName = \"\";\n    //目标id\n    targid;\n    //目标头像\n    targuserimg;\n    //我的头像\n    myuserimg;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public events: Events,\n        public ref: ChangeDetectorRef,\n        public JPushService: JPushService,\n        public UserService: UserService\n    ) {\n        this.targid = this.navParams.get('_id');\n        this.toUserName = this.navParams.get('name');\n        this.targuserimg = this.navParams.get('userimg');\n        this.myuserimg = this.UserService._user.userimg;\n        //设置极光服务属性，目前进入房间单聊\n        this.JPushService.inRoom = true;\n        //设置this指向到极光服务\n        this.JPushService.msgListTHIS = this;\n    }\n\n\n    ionViewWillLeave() {\n        //退出页面，设置极光服务以退出房间，this指向报废\n        this.JPushService.inRoom = false;\n        this.JPushService.msgListTHIS = null;\n    }\n\n    //发送信息\n    sendMsg() {\n        if (this.editorMsg == '') {\n            return true;\n        }\n        var mjson = {\n            'name': this.UserService._user.name,\n            'userimg': this.myuserimg,\n            'toUserName': this.toUserName,\n            'targuserimg': this.targuserimg,\n            'cont': this.editorMsg,\n        };\n        this.JPIMsendSingleCustomMessage(this.targid, JSON.stringify(mjson));\n        this.editorMsg = '';\n    }\n\n    //极光发送自定义信息\n    JPIMsendSingleCustomMessage(username, JsonStr) {\n        var _that = this;\n        window.JMessage.sendSingleCustomMessage(username, JsonStr, null,\n            function (response) {\n                var message = JSON.parse(response);\n                _that.pushNewMsg(message);\n            }, function (errorMsg) {\n                alert(errorMsg);\t// 输出错误信息。\n            });\n    }\n\n    //推入信息到数据\n    pushNewMsg(message) {\n        this.msgList.push(message);\n        this.scrollToBottom();\n\n    }\n\n    scrollToBottom() {\n        if (this.content.scrollToBottom) {\n            this.content.scrollToBottom();\n        }\n        this.messageInput.setFocus();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}